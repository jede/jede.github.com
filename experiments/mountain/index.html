<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Mountain</title>
        <link rel="stylesheet" href="style.css">
        <script src="./snap.svg.js"></script>
        <script>
        window.onload = function () {
          var animate = function(){
            var mount = Snap.select("#mountain"),
            scene = Snap.select("#scene"),
            timer;

            var orig = mount.transform().globalMatrix.clone(),
            squish = orig.clone()
            .translate(0, 40)
            .scale(1.5,.2, 400, 180)

            // .add(new Snap.Matrix(.4, 0, 1.4, 1, -50, 0))
            var sorig = scene.transform().globalMatrix.clone(),

            trans = sorig.clone()
            .translate(0, -700)



            var place = function () {
              clearTimeout(timer);

              scene.animate({ 
                transform: sorig.toTransformString()
              }, 170, mina.easein, function(){
                mount.animate({ transform: squish.toTransformString() }, 150, mina.linear, function(){
                  mount.animate({ transform: orig.toTransformString() }, 800, function (n) {
                    if (n == !!n) { return n; }
                    return Math.pow(1.5, -10 * n) * Math.sin((n - .075) * (2 * Math.PI) / .4) + 1;
                  },function(){
                    setTimeout(function(){
                      mount.animate({ 
                        transform: mount.transform().globalMatrix.clone().scale(0.4, 1, 400, 180).toTransformString()
                      }, 370,function (n) {
                        if (n == !!n) { return n; }
                        return Math.pow(2, -10 * n) * Math.sin((n - .075) * (2 * Math.PI) / .6) + 1;
                      });

                      scene.animate({ 
                        transform: sorig.translate(0,700).toTransformString()
                      }, 370, mina.backin);
                    }, 1000)
                  });
                });
              });

            }

            scene.transform(trans);
            timer = setTimeout(place, 50);
          }
          animate();
        };
        </script>
        </head>
        <body>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800px" height="600px" id="landscape" viewBox="0 0 800 600" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
    <title>Landscape</title>
    <description>Created with Sketch (http://www.bohemiancoding.com/sketch)</description>
    <defs>
        <rect id="path-1" x="0" y="0" width="800" height="600"></rect>
        <linearGradient x1="-142.498779%" y1="50%" x2="50%" y2="121.868896%" id="linearGradient-2">
            <stop stop-color="#E6F3FF" offset="0%"></stop>
            <stop stop-color="#58B0FD" offset="100%"></stop>
        </linearGradient>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
        <g id="Landscape" sketch:type="MSArtboardGroup">
            <g id="background">
                <use fill="#85C6FF" sketch:type="MSShapeGroup" xlink:href="#path-1"></use>
                <use fill-opacity="0.7" fill="#000000" xlink:href="#path-1"></use>
            </g>
            <g id="scene" sketch:type="MSLayerGroup">
                <g id="mountain" sketch:type="MSShapeGroup"  transform="translate(122.000000, 192.000000)">
                    <path d="M0,216 L120,136 L220,84 L272,44 L336,0 L412,62 L460,100 L508,144 L564,200 L448,236 L342,248 L160,238 L0,216 Z" id="BG" fill="#FFFFFF"></path>
                    <path d="M564,200 L508,143.837673 L436,148 L448,236.000004 L564,200 Z" id="base3" opacity="0.558025568" fill="url(#linearGradient-2)"></path>
                    <path d="M448,236 L436,148 L340,156 L342,248 L448,236 Z" id="base3" opacity="0.558025568" fill="url(#linearGradient-2)"></path>
                    <path d="M342,248 L340,156 L188,144 L160,238 L342,248 Z" id="base2" opacity="0.49" fill="url(#linearGradient-2)"></path>
                    <path d="M160,238 L0,216 L120,136 L188,144 L160,238 Z" id="base1" opacity="0.49" fill="url(#linearGradient-2)"></path>
                    <path d="M416,108 L436,148 L508,144 L460,100 L416,108 Z" id="midbase4" opacity="0.558025568" fill="url(#linearGradient-2)"></path>
                    <path d="M416,108 L436,148 L340,156 L336,108 L416,108 Z" id="midbase3" opacity="0.558025568" fill="url(#linearGradient-2)"></path>
                    <path d="M220,84 L188,144 L340,156 L336,108 L220,84 Z" id="midbase2" opacity="0.4" fill="url(#linearGradient-2)"></path>
                    <path d="M188,144 L120,136 L220,84 L188,144 Z" id="midbase1" opacity="0.4" fill="url(#linearGradient-2)"></path>
                    <path d="M412,62 L460,100 L416,108 L412,62 Z" id="midtop3" opacity="0.53" fill="url(#linearGradient-2)"></path>
                    <path d="M416,108 L412,62 L336,64 L336,108 L416,108 Z" id="midtop2" opacity="0.429758523" fill="url(#linearGradient-2)"></path>
                    <path d="M220,84 L272,44 L336,64 L336,108 L220,84 Z" id="midtop1" opacity="0.275284091" fill="url(#linearGradient-2)"></path>
                    <path d="M336,64 L272,44 L336,0 L336,64 Z" id="top2" opacity="0.143963068" fill="url(#linearGradient-2)"></path>
                    <path d="M336,64 L336,0 L411.999996,62 L336,64 Z" id="top1" opacity="0.178338068" fill="url(#linearGradient-2)"></path>
                    <path d="M340,156 L336,108 L336,64 L336,0 L412,62 L460,100 L508,144 L564,200 L448,236 L342,248 L340,156 Z" id="Shade" opacity="0.35" fill="#689FD0"></path>
                </g>
            </g>
            <g id="Rectangle-2-+-GIF" sketch:type="MSLayerGroup" transform="translate(30.000000, 30.000000)" opacity="0.4">
                <rect id="Rectangle-2" stroke="#AED9FF" stroke-width="2" sketch:type="MSShapeGroup" x="0" y="0" width="120" height="57" rx="5"></rect>
                <path d="M32.22,40.32 C36.924,40.32 40.22,37.824 40.22,33.632 L40.22,33.568 C40.22,29.856 37.788,28.16 33.052,27.008 C28.732,25.984 27.708,25.216 27.708,23.488 L27.708,23.424 C27.708,21.952 29.052,20.768 31.356,20.768 C33.404,20.768 35.42,21.568 37.436,23.072 L39.548,20.096 C37.276,18.272 34.684,17.28 31.42,17.28 C26.972,17.28 23.772,19.936 23.772,23.776 L23.772,23.84 C23.772,27.968 26.46,29.376 31.228,30.528 C35.388,31.488 36.284,32.352 36.284,33.952 L36.284,34.016 C36.284,35.68 34.748,36.832 32.316,36.832 C29.564,36.832 27.388,35.776 25.244,33.92 L22.876,36.736 C25.564,39.136 28.796,40.32 32.22,40.32 Z M57.292,40.16 L60.78,40.16 L70.06,17.6 L65.804,17.6 L59.084,34.816 L52.332,17.6 L47.98,17.6 L57.292,40.16 Z M89.116,40.384 C93.084,40.384 96.252,38.784 98.46,36.896 L98.46,27.488 L88.924,27.488 L88.924,30.912 L94.652,30.912 L94.652,35.104 C93.276,36.128 91.356,36.8 89.244,36.8 C84.668,36.8 81.628,33.408 81.628,28.8 L81.628,28.736 C81.628,24.448 84.764,20.832 88.892,20.832 C91.74,20.832 93.436,21.76 95.164,23.232 L97.66,20.256 C95.356,18.304 92.956,17.216 89.052,17.216 C82.3,17.216 77.5,22.528 77.5,28.8 L77.5,28.864 C77.5,35.392 82.108,40.384 89.116,40.384 Z" id="SVG" fill="#AED9FF" sketch:type="MSShapeGroup"></path>
            </g>
        </g>
    </g>
</svg>
</body>

<div>
  Reload the page to play again
</div>
</html>
